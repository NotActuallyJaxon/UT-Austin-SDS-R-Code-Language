---
title: "RLibrary"
author: "R UT Austin"
output:
  html_document: 
    theme: darkly
    toc: yes
    toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{css, echo=FALSE}
.watch-out {
  background-color: black;
  border: 2px solid grey;
  font-size: 10px;
  font-weight: bold;
  text-align: left;
  }
```

* [Library Github](https://github.com/NotActuallyJaxon/SDS-313-UT-Austin)

***

## **Use word search shortcuts like CTRL+G to find specific functions faster**

***

# [**Packages:**]{style="color:#FFCC00;"}

```{r class.source="watch-out"}
# install.packages("bslib") | (adds themes and nice formatting to shiny apps)
# library(bslib)

# install.packages("rsconnect") | (used to publish shiny apps)
# library(rsconnect)

# install.packages("shiny") | (handy web apps)
# library(shiny)

# install.packages("rvest") | (Used for reading and importing html)
# library(rvest)

# install.packages("sas7bdat") | (Reads sas7bdat files)
# library(sas7bdat)

# install.packages("stringr") | (Manipulate and navigate strings)
# library(stringr)

# install.packages("lubridate") | (Dates and times)
# library(lubridate)

# install.packages("nycflights13") | (dataset for New York City departing flights)
# library(nycflights13)

# install.packages("rmarkdown") | (Rmarkdown files)
# library(rmarkdown)

# install.packages("kableExtra") | (Better tables))
# library(kableExtra)

# install.packages("ggplot2") | (Better graphs)
# library(ggplot2) 

# install.packages("tidyverse") | (Includes a variety of packages containing useful functions)
# library(tidyverse) 

# install.packages("mosaic") | (includes a variety of packages used in statistics calculations such as resampling)
# library(mosaic)
```

* [shiny Cheat Sheet](https://rstudio.github.io/cheatsheets/shiny.pdf)

* [rvest Cheat Sheet](https://cran.r-project.org/web/packages/rvest/rvest.pdf)

* [sas7bdat Cheat Sheet](https://cran.r-project.org/web/packages/sas7bdat/sas7bdat.pdf)

* [stringr Cheat Sheet](https://github.com/rstudio/cheatsheets/blob/main/strings.pdf)

* [lubridate Cheat Sheet](https://rawgit.com/rstudio/cheatsheets/main/lubridate.pdf)

* [nycflights13 Cheat Sheet](https://cran.r-project.org/web/packages/nycflights13/nycflights13.pdf)

* [rmarkdown Cheat Sheet](https://evoldyn.gitlab.io/evomics-2018/ref-sheets/rmarkdown-cheatsheet-2.0.pdf)

* [kableExtra Cheat Sheet](https://haozhu233.github.io/kableExtra/awesome_table_in_html.html)

* [GGplot2 Guide](https://r-charts.com/ggplot2/)
* [GGplot 2 Cheat Sheet](https://github.com/rstudio/cheatsheets/blob/main/data-visualization.pdf)

* [tidyverse Cheat Sheet](https://res.cloudinary.com/dyd911kmh/image/upload/v1676302697/Marketing/Blog/Tidyverse_Cheat_Sheet.pdf)

***

# [**Environment Management:**]{style="color:#FF9900;"}

## Lists objects in working memory:

```{r class.source="watch-out"}
# ls()
```

## Removes object from environment:

```{r class.source="watch-out"}
# rm(list='x1') 
```

## Will clear entire environment:

```{r class.source="watch-out"}
# rm(list=ls())
```

## Session controls

```{r class.source="watch-out"}
# setwd("file address")
```

***

# [**Options And Functions:**]{style="color:#FF9900;"}

## Scientific notaton removed

```{r class.source="watch-out"}
# options(scipen=999)
```

***

# [**Math Operations:**]{style="color:#FF6600;"}

## Basic math

```{r class.source="watch-out"}
# 1+2 Addition
# 3-1 Subtraction
# 4/2 Division
# 3*2 Mltiplication
# 5^2 Power
# sqrt(4) Square root
# pi - numeric pi
# abs(-2) absolute value
# round(pi, decimal places) round
# cos(pi) trigonometry
# sin(pi/2) trigonometry
# num1%%num2 remainder division
```

## Dataset Math

```{r class.source="watch-out"}
# max(dataset) : maximum
# min(dataset) : minimum
# sd(dataset)  : standard deviation
# length(dataset) : number of values
# table(dataset) 
# summary(dataset) 
# fivenum(dataset) : min, Q1, median, Q3, max - in that order
# sum(dataset) : sum of all values
# mean(dataset) : mean
# median(dataset) : median
# count() : another method of counting besides sum() -dplyr package
```

## Proportions And Correlation

```{r class.source="watch-out"}
# prop.table(table(med$Diabetic))
# cor(data$variable1, data$variable2)
```

***

# [**Built In Functions:**]{style="color:#FF6600;"}

## Rolling dice or flipping a coin

```{r class.source="watch-out"}
# flip = sample(c("heads","tails"),1) #Coin flip
# roll = sample(C(1:6),1) #Six sided die
```

***

# [**Creating Variables:**]{style="color:#FF6600;"}

## Assigning variables

```{r class.source="watch-out"}
# variableName = int/char/vector/data
```

## Assigning values

```{r class.source="watch-out"}
# val1 <- 2
# val1/3
```

## Numeric vectors

```{r class.source="watch-out"}
# x1 <- c(1,2,4,6) 
# x1[2] 
# x2 <- c(x1,x1) 
# x2[1]
```

## Sequences and reps

```{r class.source="watch-out"}
# x3 <- 1:10 
# x3
# x4 <- seq(0,100,25) 
# x4 
# x5 <-rep(-1,10) 
# x5
```

## Character vectors

```{r class.source="watch-out"}
# y1 <- c('blue', 'cat', 'black') 
# y1[2]
```

## Logical vectors

```{r class.source="watch-out"}
# z1 <- c(TRUE, )
```

***

# [**Replication:**]{style="color:#FF3300;"}

## Applying functions over a list

```{r class.source="watch-out"}
# replicate(n, expression) : Creates a list of values with the expresion applied n times


# lapply(X, FUN) : returns a list of the same length as X, each element of which is the result of applying FUN to the corresponding element of X.


# sapply(X, FUN,)
# user-friendly version and wrapper of lapply by default returning a vector, matrix or, if simplify = "array", an array if appropriate, by applying simplify2array(). sapply(x, f, simplify = FALSE, USE.NAMES = FALSE) is the same as lapply(x, f).
```

***

# [**Loops:**]{style="color:#FF3300;"}

## Loop Basics

```{r class.source="watch-out"}
# for (i in 1:n){
#   print('hellow world!')
# } 
# Will print hellow world! n times
# Represents index but it doesn't need to be i
# Could use (i:n) or (c(1,2,3,4,5))
```

## Storing Results From A Loop

```{r class.source="watch-out"}
# Results = vector(length=10)
# for (i in 1:10) {
#   Results[i] = i*2
# } 
# Will put i*2 in the i index of Results as the loop changes i

# Results = c() 
# for (i in 1:10) {
#   Results = c(Results,i*2)
# }
# Results
# Useful loop structure for vectors with an unknown length
```

## Loop Errors

```{r class.source="watch-out"}
# ***Trying to grab from index <= 0 will return and error because no such index exists

# Loops within loops must use different variables for index
```

***

# [**Conditions:**]{style="color:#FF0066;"}

## If/Else Statements

```{r class.source="watch-out"}
# if (condition) {
#   Code
#   } 
# Will only run "Code" if condition is true

# if (condition) {
#   Code1
#   }
#   else {
#     Code2
#     } 
# Will run "Code1" if condition is true and will run "Code2" if i condition is false

# if (condition) {
#   Code
#   }
#   else if (condition2) {
#     Code2
#   }
#   else {
#     Code3    
#     }
# Will run "Code1" if condition1 is true and will check condition2 only if condition1 was false. It will then check condition2 like a if statement and proceed from there.
```

***

# [**Navigating Datasets:**]{style="color:#FF00CC;"}

## Navigating data

```{r class.source="watch-out"}
# index <- which(data$variable == whatIsBeingLookedFor)
# unique(vector) #returns every unique value in vector, can be used for colnames / row values
```

## specifying columns and rows

```{r class.source="watch-out"}
# films$Rating[4] 
# films[20,4] 
# films[20,] #return information in entire row
```

## Returns truth value of row

```{r class.source="watch-out"}
# films$Rating == 'R'
```

## Returns each row thats true

```{r class.source="watch-out"}
# films[films$Rating == 'R',]
```

***

# [**Subset/Manipulate Data:**]{style="color:#FF00CC;"}

## Creating Subset

```{r class.source="watch-out"}
# Rmovies <- films[films$Rating == 'R',]
# dataset = tibble("header1"=vector1, "header2"=vector2) creates a tibble dataset with headers as column names and values or rows set to vectors given
```

## Creating New Column

```{r class.source="watch-out"}
# med <- read.csv('medicaldata.csv') med$overweight <- 1*(med$BMI>=25)
```

## Combining Colums

```{r class.source="watch-out"}
# cbind(dataset1, dataset2) #(adds columns together) number of rows should be the same, IDs should match
# rbind(dataset1, dataset2) #(adds rows together) number of columns should be the same, also column naming should match
```

## Naming columns

```{r class.source="watch-out"}
# colnames(dataset)[columnIndex] = "newHeader"
# rownames(dataset)[rowIndex] = "newIdentifier"
```

## Rearranging/sorting data

```{r class.source="watch-out"}
# t() will transpose (flip) the data frame so rownames become column names and vice versa
# arrange(dataset, (ColumnToArrangeBy)) will sort alphabetically/numerically, Make -(ColumnToArrangeBy) to order descending
# filter(dataset, conditon) #will create a new data frame absent of rows/columns where the value was false
# colMeans(dataset, na.rm=TRUE) #Creates a dataset with the columns collapsed into their mean
# factor(columnToBeOrdered, levels=vectorOfOrderedItems) #need this for line charts to order x axis EX: levels=c(1,2,3,4)
```

## Summing column rows / aggregate

```{r class.source="watch-out"}
# dataset2 = aggregate( cbind(Header1,Header2) ~ Indicator, data = dataset , FUN = sum ) #Creates a new dataset2 which is made of the column headers 1 and 2 aggregated by indicator (which when set as a column aggregates by the values in that column)
```

## Data wrangling

```{r class.source="watch-out"}
# group_by(category/s) for splitting a data set into groups
# filter(dataset,) for looking at specific rows
# mutate(dataset,) #changes the dataset in some way
# select(dataset,) #outputs only the observations mentioned
# arrange(dataset, (ColumnToArrangeBy)) will sort alphabetically/numerically, Make -(ColumnToArrangeBy) to order descending
# sample(dataset, replace = FALSE) #replacement is FALSe by default (sample with no replacement)

# Example:
# dataset = dataset %>%
#   group_by(category) %>%
#    summarize(avg=mean(total))
# This will take dataset and create a subset with a column of category variables
# with another column of their associated means calculated from the values (total) of the same line as the variable from
# category

# Another Example:
# dataset = dataset %>%
#   group_by(category) %>%
#    summarize(avg=mean(total), .groups="drop") #This will do the same but keep all the other columns in the data set
#                                               which it can keep

# Another Example:
# dataset = dataset %>%
#   mutate(column1, sample(column1)) # Shuffles the values in column 1 randomly
#                                    # Used in randomization tests
```

***

# [**Reshaping Data:**]{style="color:#FF00CC;"}

## Lengthening Data

```{r class.source="watch-out"}
# dataset = pivot_longer(dataset, cols="",names_to="", values_to="")

# cols specifies which columns need to be pivoted, i.e. which columns aren’t variables. This argument uses the same syntax as select(); we could use starts_with("wk") - a short cut.

# names_to names the variable stored in the column names, we named that variable week.

# values_to names the variable stored in the cell values, we named that variable rank.

# values_drop_na=True, gets rid of NA values since they don't represent unknown observations.
```

## Widening Data

```{R class.source="watch-out"}
# dataset = pivot_wider(dataset, id_cols="",names_from=type1,values_from=type2)

# id_cols specifies which column(s) uniquely identifies each row of your desired resulting dataset.

# names_from indicates where the column names in your desired resulting dataset should come from.

# values_from indicates where the cell values in your desired resulting dataset should come from.

# use vectors c("","","") to uniquely identify if necessary
```

## Turning categories into numbers

```{r class.source="watch-out"}
# dataset = mutate(dataset, category=parse_nunber(category))
```

## Useful code while reshaping data

```{r class.source="watch-out"}
# starts_with("") selects items that start with whats indicated

# values_drop_na=TRUE drops items that are NA and so no longer represents an empty observation
```

***

# [**Simulation/Statistics/Experiments:**]{style="color:#CC33CC;"}

## Random Number Generation

```{r class.source="watch-out"}
# sample(1:100, 60, replace=TRUE) #Returns random number between 1 and 100 inclusive 60 times, more than 1 times returns a list, replace = TRUE replaces values after sampled

# runif(1000,0,1) #Returns a list of 1000 numbers randomly generated between 0 and 1 inclusive with decimals including, Intended to create uniform distributions between the two values.

# rnorm(1000,mean,standard deviation) #Returns a list of 1000 numbers generated in a way to create a normal distribution with a mean specified and standard deviation specified

# Sample(c("heads","tails"),1) #Uses sample to make a coin flip
```

## Coin Flips

```{r class.source="watch-out"}
# coinFlipResult = nflip(n=1, prob=5)
# coinFlipResult = do(10000)*nflip(n=1, prob=0.5) do it 10,000 times and store in coinFlipResult 
```

## Bootstrapping

```{r class.source="watch-out"}
# resample(dataset) takes a sample *with replacement - library(mosaic) 


# confint_object = confint(dataset, level=0.95) a 95% confidence interval *every data point must be a sample to show full info 
# How to interpret confidence interval \/
# I am level % confident that the calculation(such as mean, diffmean, prop, with units) is between the lower bound and upper bound (with units)

# Grabing specifics from the confidence interval object
# confint_object$name       : returns the test ("cor","prop","mean", . . .)
# confint_object$lower      : returns the lower bound of interval
# confint_object$upper      : returns the upper bound of interval
# confint_object$level      : returns the level of confidence ("0.95%")
# confint_object$method     : returns the method of calculating
# confint_object$estimate   : retunrns best estimate based on the interval



# NewDataset = do(numSamples))*mean(resample(ogDataColumn)) creates a bootstrapped sampling distribution of the means of ogDataColumn based on ogData with replacement
# (column must fit mean calculation -numeric)

# NewDataset = do(numSamples)*diffmean(numericVariable ~ categoricalVariale, data=resample(ogData))
# creates a bootstrapped sampling distribution of the difference of means between the 2 categories (must be 2) based on ogData with replacement

# NewDataset = do(numSamples)*cor(numericColumn1 ~ numericColumn2, data=resample(ogData))
# creates a bootstrapped sampling distribution of the correlation between 2 numeric columns based on ogData with replacement

# NewDataset = do(numSamples))*prop(resample(ogDataColumn)) 
# creates a bootstrapped sampling distribution of the prop of ogDataColumn that is TRUE based on ogData with replacement
# (column must fit prop calculation -boolean)
```

## Nifty Mosaic Functions

```{r class.source="watch-out"}
# prop(value == something) : general format
# or
# prop(dataset$column == value) : more specific
# or
# prop(resample(dataset$column == value)) : with resamples for bootstrapping

# use as.numeric() to extract the raw number form of the prop() 
```

## Chi-squared Statistic

```{r class.source="watch-out"}
# Chi-squared statistic
# Chi-squared = sum((Expected-Observed)^2 / Expected)
# Chi_Squared_Stat = function(Expected, Observed){
#   sum((Expected-Observed)^2 / Expected)
# }
# A lower chi-squared means the less two sets of proportions differ from one another / lower = the more alike
# Used by comparing the chi-squared of proportion sets to find anomalies


# rmultinom(n(how many samples simulated), size(how many observations), prob(vector of probabilities)) 
# creates n columns of simulations given probabilities of a multinomial distribution (several terms) each row associated with relative index of probability vector (row1 -> first probabilty in vector)


# test2 = rmultinom(5, 52, c(0.5,0.3,0.1))
# will output 5 column and 3 row data set with sample statistics based on the probabilty vector
# (like a vat of m&ns of different colors with their respective proportion and grabing a handful of size 52)
```

## Cause And Effect

```{r class.source="watch-out"}
# D : "treatment"/direct intervention
# Y(D) : Outcome under the treatment

# Y(1) : Potential outcome if treatment happens
# Y(0) : Potential outcome if treatment doesn't happen

# Causal effect also known as the treatment effect (TE) is 
# TE = Y(1) - Y(0)
# Difference between treatment and control groups

# If null hyothesis is true then 
# Y(1) - Y(0) = 0

# Counterfactual : an if–then statement about something that has not actually occurred.

# Y(D = 0) = 0 : Counterfactual
# Y(D = 1) = 1 : Actual

## Blocking : randomize subjects to treatment and control within a bunch of “near-twin” pairs.
```

## Causal Inference 

```{r class.source="watch-out"}
# Internal validity: is about causal inference within the study.
# Framed another way: Internal validity is about generalizing from actual treatment assignments to counterfactual ones for the participants in the study


# External validity:The extent to which results from an experiment generalize to other populations, settings, and time periods.
```

## Threats To External Validity

```{r class.source="watch-out"}
# Non-representative sample:
#     If the study participants differ from the broader population, the results may not generalize.
#     Example: A medical trial using only young adults may not apply to older populations.
# Artificial setting:
#     Lab experiments might not capture real-world behavior.
#     Example: People may act differently in a psychology study than in daily life.
# Treatment effect heterogeneity:
#     The effect might be different for different groups (age, income, culture, etc.).
#     Example: A job training program may work well in urban areas but not in rural ones.
# Temporal validity:
#     Will the effect still hold years later?
#     Example: A policy tested in a recession might not work the same in a boom.
```

## Natural or Quasi Experiments

```{r class.source="watch-out"}
# study designs that are like “like an experiment,” but without an actual experimental intervention. 
# In these studies, units (e.g. people, states, firms) are assigned to the “treatment” and “control” conditions by a mechanism that is:
#     1. Outside the control of either the investigators or the people actually in the study.
#     2. Plausibly “resembles a random assignment.” 


# Pros:
#     They ensure balanced characteristics (even those we cannot observe) between treatment and control groups, on average
#     So they eliminate the possibility of systematic bias due to observed and unobserved confounders (assuming randomization is done properly).
#     Randomized controlled trials (RCTs) are considered the gold standard of evidence.
# Cons:
#     They’re often unfeasible or unethical (seatbelts, parachutes, cigarettes…)\
#     They often have limited external validity, especially if the sample looks very different from the wider population
#     They can be very expensive (typical Phase III chemotherapy trial: $300 million)
#     Compliance issues: “you can lead a horse to water…”


# Two methods:

# (1) Discontinuity designs (RD), Regression Discontinuity
#     Exploits a sharp cutoff (e.g., test scores, income thresholds). Extrapolation comes from: The treated unit’s own pre-treatment trend, assuming continuity. 
#       Sharp RD: In “sharp” RD designs, treatment status (either 0 or 1) is 100% determined by a. If we know a, we know whether you were “treated.” So treatment is discontinuous: no matter how close you get to the threshold, you aren’t “treated” until you cross it.
#       Fuzzy RD: A slight variation is "fuzzy RD": Here the probability of being “treated” jumps or ramps up at a threshold. Not truly a “discontinuity,” but we use the term anyway to annoy mathematicians.

# (2) Difference-in-Differences (Diff-in-Diff)
#     Compares changes over time between a treated group and an untreated control group. Extrapolation comes from: What actually happens in the control group, assuming parallel trends.
#       The diff-in-diff analysis compares changes rather than levels, thereby controlling for the fact that the two areas were not initially the same. 
```

## Observational Studies

```{r class.source="watch-out"}
# a research method that involves observing people or collecting data without intervening or changing their circumstances. 


# **Matching**
# Matching: Compare units that are as similar as possible
# Matching means constructing a balanced data set from an unbalanced one:
# Matching is similar in spirit to blocking, but it happens in the analysis phase, in the absence of randomization (rather than prior to randomization for blocking).

# Matching can fail due to unobserved lurking variables

# Matching Pros and Cons.
# Pros: 
#   -Its transparent
#   -easy to understand
#   -easy to diagnose obvious failures.
# Cons:
#   -Can only match what you can observe
#   -Often leads to wider error bars than fancier, harder-to-understand methods


# Types of observational studies
# Longitudinal versus cross-sectional
#   Cross-sectional: examine the data on treatment and outcomes at one time point. 
#   Longitudinal: examine units over time to see temporal ordering of treatment/outcome
# Prospective versus retrospective
#   Prospective: sample units and start collecting data as real life happens.
#   Retrospective: sample units and collect data about their past
# Cohort versus case-control
#   Cohort studies: units are sampled by what treatment they experience
#   Case-control studies: units are sampled by what outcome they experience
```

## Matching

```{r class.source="watch-out"}
# install.packages("MatchIt")
# library(MatchIt)

# Matching one variable (treatment/result) to others
# newdataset_matched = matchit(
#                              (treatment/result variable) ~ 
#                              matchedvar1 +
#                              factor(matchedvar2) +
#                              factor(matchedvar3) + ... ,
#                              data = dataset,
#                              ratio = numericValue)

# ratio : the number of control units matched to each treated unit
```

## Study Hierarchy

```{r class.source="watch-out"}
# Gold
#   (1) Randomized controlled trials
# Silver: nearly as good as an RCT
#   (2) Quasi-experiments (incl. RDD or diff-in-diff) with good randomization mechanisms
# Bronze. Can be very convincing, but hard to do well
#   (3) Prospective cohort studies
# Circumstantial, good for exploration and hypothesis generation; only occasionally good enough to be convicning on their own.
#   (4) Retrospective cohort studies; case-control studies; quasi-experiments with suspect randomization mechanisms that require further statistical adjustment
#   (5) Purely cross-sectional studies
# Suggestive, at best; misleading at worst.
#   (6) Anecdotes
```

## Randomization Test

```{r class.source="watch-out"}
# Monte Carlo Simulation


# Key insight : If the null hypothesis is true, then the random assignment to treatment vs. control didn't affect the outcome.

# Permutation test
# dataset = dataset %>%
#   mutate(column1, sample(column1)) # Shuffles the values in column 1 randomly
#                                    # Used in randomization tests
# Create a samping distribution of multiple of these shuffles then test what values are consistent with the data

# This is different than bootstrapping because its a different perspective but both come to the same conclusion
# The Permutation test can provide a confidence interval that *is consistent with the data collected.

# Another Explanation:
# bootstrapping focuses on estimating population parameters by resampling from the original data, while a randomization test focuses on hypothesis testing by randomly re-assigning treatment groups within the data to assess the likelihood of observing the observed effect under the null hypothesis.
```

## p-value

```{r class.source="watch-out"}
# Anomaly: An observation, event, or pattern that significantly deviates from what is expected under our existing knowledge or models of the world

# Null hypothesis: The hypothesis that there is no significant difference between specified populations, any observed difference being due to sampling or experimental error.

# Test statistic: A number calculated by a statistical test. It describes how far your observed data is from the null hypothesis of no relationship between variables or no difference among sample groups.

# p-value: A statistical measurement used to validate a hypothesis against observed data. A p-value measures the probability of observing a test statistic at least as extreme as what we observed, just by chance, if the null hypothesis were true.



# p-value: a proportion of values > a certain value
# used in chi square distributions
# p-value = mean(Values >= ObservedValue)
# p-vale = sum(Values >= ObservedValue) / TotalValues
# Both formulas work
```

## Expected values 

```{r class.source="watch-out"}
# Expected value = weighted average of the possible outcomes
# Expected value = (outcome1)(probability of outcome1) + (outcome2)(probability of outcome2) . . .
```

## Poisson Distributions

```{r class.source="watch-out"}
# The Poisson distribution is a useful parametric model for any situation where we count the number of events that happen over a specific time interval.

# the three key functions to know are:
#   - rpois: for simulating Poisson outcomes
#   - dpois: for calculating the probability of specific outcomes
#   - ppois: for calculating cumulative probabilities for a range of outcomes

# rpois( (N, number of outcomes) , (average rate) ) -> integer outcome * N times (1 0 0 1 1 0) for N=6 rate=1.45
# dpois( (outcome) , (average rate) ) -> probability of the outcome given the average rate
# ppois( (outcome) , (average rate) , lower.tail=TRUE) -> P(x <= outcome) (probability that any given outcome is <= outcome)
# lower.tail=FALSE would mean P(x > outcome) instead

# xtabs(~rpois1 + rpois2) -> returns a contingency table (optionally a sparse matrix) from cross-classifying factors

# sum(rpois1 > rpois2)/(Number of outcomes) -> returns the probability that the outcome of rpois1 is > rpois2
# sum(rpois1 == rpois2)/(Number of outcomes) -> returns the probability that the outcome of rpois1 is == rpois2
# sum(rpois1 < rpois12)/(Number of outcomes) -> returns the probability that the outcome of rpois1 is < rpois2

```

## Binomial distributions

```{r class.source="watch-out"}
# Useful for getting the probability of an event(s) given the population and the expected proportion

# the three key functions to know are:
#   - rbinom: for simulating binomial outcomes
#   - dbinom: for calculating the probability of specific outcomes
#   - pbinom: for calculating cumulative probabilities for a range of outcomes

# rbinom( (N, number of outcomes) , (total that everage rate is based on), (average rate)) -> returns the integer outcome * N times (12 14 8 16 11) for N=5, rate=0.9
# dbinom( (outcome) , (total that everage rate is based on), (average rate)) -> returns the probability of the outcome given the average rate
# pbinom( (outcome) , (total that everage rate is based on), (average rate) , lower.tail=TRUE) -> returns the P(x <= outcome) (probability that any given outcome is <= outcome)
# lower.tail=FALSE would mean P(x > outcome) instead
```

## Fitting Equations

```{r class.source="watch-out"}
# Regression_Line = lm(var1 ~ var2, data=Dataset) : creates a regression line based on the relationship between the two variables which in a dataset could be 2 columns
# var1 is the "y" component while var2 is the "x" component of the linear relationship

# Regression_Line = lm(car1 ~ poly(var2, n), data=dataset) : creates a regression line based on the polynomial relationship between the two variables

# Regression_Line - lm(var1 ~ var2 + var3 + var4:var5, data=Dataset)
# ~ var2 + var3 : add additional predictors
# ~ var2 + var3:var4 : add an interaction between two variables

# large sample statistics
# Regression_Line_Boot = do(num)*lm(var1 ~ var2 + var3 + var4:var5, data=Dataset)

# confint for regression models
# Regression_Line_Confint = confint(Regression_Line_Boot, level=0.95) : confidence interval for regression model coefficient

# better confint for regression models
# regression_Table = get_regression_table(regression_Model, conf.level = 0.95, digits=2)
# include a confidence interval (large sample statistics) or digit manipulation

# coef(Regression_Line)
## (Intercept) var            : (intercept) is the value at 0 var
## 207.9306683 -0.6878927     : var is the change for an increment in 1 of var

# + abline(lm(Data$var1 ~ Data$var2) ,col='red') : adds a regression line to a plot based on the relationship between the two variables which in a dataset could be 2 columns
# var1 is the "y" component while var2 is the "x" component of the linear relationship
```

## Exponential Models (finish later)

```{r class.source="watch-out"}
# In an exponential model both the "x" and "y" can be log(base e)(x/y)
# This would transform the exponential model to a linear one
```

## Residuals, Correlation, And Variation

```{r class.source="watch-out"}
# Residual = (Actual value) - (Predicted value)

# correlation coefficient, a value between -1 and 1 that measures the strength and direction of a linear relationship between two variables.  

# rsquared(Regression_Model)
# R^2 aka coefficient of determination, denoted R2 or r2 and pronounced "R squared", is the proportion of the variation in the dependent variable that is predictable from the independent variable(s)
```

## ANOVA Table

```{r class.source="watch-out"}
# eta_squared() : "effectsize" library
```

***

# [**Online Data:**]{style="color:#CC00FF;"}

## Getting Data

```{r class.source="watch-out"}
# library(sas7bdat)
# texas <- read.sas7bdat('texas.sas7bdat') #May not always be in csv format

# Another way is copy pasting into excel or sheets and exporting as a csv

# Scraping data 
# Use Chrome Selector Gadget Extension
# library(rvest) #Needed for functions used
# adventures = "https://mycurlyadventures.com/fun-austin-date-night-ideas/" #assigning variable for web page
# adventures_page = read_html(adventures) #Reading the html
# adventures_do <- html_text(html_elements(adventures_page, ".adhesion_desktop,.wp-block-heading")) #Grabing specific elements
# adventures_do #Showing the resulting list

# Dataset = tibble("Header" = list, "Header" = list, +...) #Combines list created by doing the above into a tibble dataset.
```

## Online Dataset Resources

* [Kaggle](https://www.kaggle.com)
* [Github Datasets(Easy)](https://corgis-edu.github.io/corgis/csv/)
* [Github Datasets](https://github.com/rfordatascience/tidytuesday)
* [Austin Datasets](https://data.austintexas.gov/)

***

# [**Shiny:**]{style="color:#CC00FF;"}

* [Cheat Sheet](https://rstudio.github.io/cheatsheets/shiny.pdf)
* [Example Gallery](https://shiny.posit.co/r/gallery/#user-showcase)
* [Widgets For Apps](https://shiny.posit.co/r/gallery/widgets/widget-gallery/)

## Setting up Shiny

```{r class.source="watch-out"}
# install.packages("shiny")
# library(shiny)
# install.packages("rsconnect")
# library("rsconnect")
# rsconnect::setAccountInfo(name='notactuallyjaxon', token='7142DD4C6D0F2C207F4AD2BB097C9198', secret='J6Nb9+RxhbWCCeP5pkWWQls4cBIguvtcp8O1RtKi')
```

## Uploading an app to Shiny

```{r class.source="watch-out"}
# create a folder for the app - Name it something simple like DataXXX
# rsconnect::deployApp("app.R file working directory")
# forgetDeployment() for publishing over an existing app published from the same file
```

## Basic Structure of a Shiny App

```{r class.source="watch-out"}
# ui = fluidPage( #User interface / visual output
# 
# ) 

# server = function(input, output){ #Server function / calculations
# 
# } 
  
# shinyApp(ui = ui, server = server) #Call to run the app / running the app
```

## Creating Shiny Apps

```{r class.source="watch-out"}
# Defining user interface
# ui = fluidPage(
#   #App title
#   titlePanel("This is the Title"),
#   
#   sidebarLayout(
#     sidebarPanel("This the slidebar panel"),
#     mainPanel(
#       h2(em("This is the main header panel"),align="center",style="color:pink"), #em() is for italics
#       br(), #Line break
#       p(strong("bolded paragraph text")),
#       div("Can also style text like so", style="color:purple")
#     )
#   )
# )
# 
# Define server function (blank)
# server = function(input,output){
# }
 
# Running the app
# shinyApp(ui=ui,server=server)
```

## Widgets

```{r class.source="watch-out"}
# actionButton("WidgetName", label = "Text")

# radioButtons("WidgetName", label=h3("Header Text:"), 
#                  choices=list("Text"=value,"Text"=value), 
#                  selected = defaultNumericChoice)

# selectInput("WidgetName", label = h3("Header Text:"), 
#                 choices=list("Text"=value, "Text"=value), 
#                 selected = defaultNumericChoice)

# sliderInput("WidgetName", label = h3("Header Text:"), 
#                min = minimumVal, max = maximumVal, 
#                value=c(leftVal, rightVal))

# checkboxGroupInput("WidgetName", label = h3("Header Text:"),
#                choices=list("Text"=value, "Text"=value),
#                selected=c("Value/s"))

# checkboxInput("WidgetName", label = "Text", value = value)

# dateInput("WidgetName", label = h3("Header Text:"), 
#                value = "year-month-day")

# dateRangeInput("WidgetName", label = h3("Header Text:"))

# fileInput("WidgetName", label = h3("Header Text:"))

# numericInput("WidgetName", label = h3("Header Text:"), 
#                value = 1)

# textInput("WidgetName", label = h3("Header Text:"), 
#                value = "text")
```

## Using Widget Values

```{r class.source="watch-out"}
# Value of widget
# input$WidgetName
```

## Output syntax

```{r class.source="watch-out"}
# mainPanel(
#     p("Output1 header:"),
#     fluidRow(verbatimTextOutput("ValueVariable1")),
#     p("Output2 header:"),
#     fluidRow(verbatimTextOutput("ValueVariable2")),
#     p("Output3 header:"),
#     fluidRow(verbatimTextOutput("ValueVariable3")),
# )

# server <- function(input, output) {
#     
#     #Access the values of the widget (as a vector)
#     # with input$radio
#     output$ValueVariable1 <- renderPrint(Value1)
#     output$ValueVariable2 <- renderPrint(Value2)
#     output$ValueVariable3 <- renderPrint(Value3)
# }
```

## Render Outputs (Server section)

```{r class.source="watch-out"}
# Text/Numeric/Boolean outputs
# renderPrint()

# Plot outputs
# renderPlot()

# Data outputs
# renderDataTable()

# Image outputs
# renderImage()

# Table output
# renderTable()

# Text output
# renderText()

# UI output
# renderUI()
```

## Actual outputs (ui section)

```{r class.source="watch-out"}
# Text/Numeric/Boolean outputs
# verbatimTextOutput()

# Plot outputs
# plotOutput()

# Data outputs
# dataTableOutput()

# Image outputs
# imageOutput()

# Table output
# tableOutput()

# Text output
# textOutput()

# UI output
# uiOutput()
# htmlOutput()
```

## App Visual Structure

```{r class.source="watch-out"}
# hr() #Horizontal line break

# br() #Empty space break

# p("regular text")
# p(strong("bold text"))
# p(em("italic text"))
# p(code("code text"))
# a(href="link", "link name")

# card_header(h3("Header Text:"))

# navset_card_underline(
#   nav_panel("Tab Panel Name", card_header("Tab Panel Text"),
#   nav_panel("Tab Panel Name", card_header("Tab Panel Text"),
#   ...
# )

# conditionalPanel(condition = true/false_statement
#   #rest of the panel that displays if true
# )
```

***

# [**Importing And Exporting:**]{style="color:#0033FF;"}

## import/read in a data set

```{r class.source="watch-out"}
# films <- read.csv('films.csv')
```

## Exporting data

```{r class.source="watch-out"}
# write.csv(Rmovies, file = 'R_Films.csv')
```

***

# [**Managing NA:**]{style="color:#0066FF;"}

## NA and inf Shenanigans

```{r class.source="watch-out"}
# is.infinite() #returns true if its inf
# is.na() #returns true if its NA
# na.rm=TRUE #ignors NA values (useful for graphing)
# na.omit() #removes any rows that contain NAs
# use="complete.obs" #ignors NA values (useful for calculations)
# Climate_General = na_replace(dataset, 0) #Replace all NAs in datasetwith 0, 0 can be replaced with any matching type value.
```

***

# [**Functions:**]{style="color:#0099FF;"}

## Naming and calling functions
```{r class.source="watch-out"}
# Function_Name = function(variable=Default, variable, variable){
#   print()
#   return() #ends the function and returns
#   break() #would break out of the loop
# }

# val = Function_Name(variable, variable, variable) # Calling the function and setting val to the returned value(s)
```

***

# [**Strings:**]{style="color:#00CCFF;"}

## Converting to UTF-8 Strings

```{r class.source="watch-out"}
# Variable/Observation = iconv(Variable/Observation, from="ISO-8859-1", to="UTF-8") #Converts to usable string.
```

## Navigating Strings

```{r class.source="watch-out"}
# '' and "" can define strings though "" works with some complex characters when '' does not.

# Including a "\n" moves the string after down a line

# Use cat(string) to print actual text

# Use library(stringr) package for more functions

# str_length(string) #Returns number of characters in string (includes space)

# str_sub(string, First_Index, Last_Index) #Returns string inbetween and including the first and last index inputted (first character is index 1) (negative index counts backward from end)

# str_detect(x, "character/text") #Returns true/false if x contains character/text

# str_count(x, "character/text") #Returns how many times the character or text appears in x

# str_subset(x, "character/text") #Returns all elements of x that have character/text

# str_subset(x, "^character/text") #Returns all elements of x that start with character/text

# str_subset(x, "character/text$") #Returns all elements of x that end with character/text

# str_subset(x, "^element/text$) #Returns only the exact matches of element/text

# str_subset(x, "ti(g|c)") #Returns elements of x with either tig or tic

# str_subset(x, "[abc]") #Returns elements of x with either an a,b, or c

# str_subset(x, "(fox|bear)") #Returns elements of x with either "fox" or "bear"
```

## Manipulating Strings

```{r class.source="watch-out"}
# str_to_upper(string) #whole string uppercase
# str_to_lower(string) #whole string lowercase

# paste("String", "String", numeric, ...) #Combines the items with a space
# paste0("String", "String", numeric, ...) #Combines the items without a space
# paste(Split_Lyrics_Data, collapse=" ") #Convert list data into large string

# str_extract(x, "character/text") #Returns just the character/text contained in x (if it doesn't exist it returns NA)

# str_replace_all(x, "character/text1", "character/text2") #Returns elements of x with character/text1 replaced with character/text2

# str_split(x, " ", simplify=TRUE) #Returns a dataset with each element of x in a separate column and the text separated by " " being put into rows of that column. (" " can be replaced with any character like "/" to split dates Y/M/D)

# str_sub_vec = as.vector(x) #Returns a vector of x

#str_wrap("text", width=numericValue) # Will automatically wrap text around onto another line
#                                     # Width is cutoff number of characters
#                                     # Often used in plot titles, captions, and other labeling
```

***

# [**Plotting In Base r:**]{style="color:#00FF99;"}

* [Base R Plots Cheatsheet](https://publish.illinois.edu/johnrgallagher/files/2015/10/BaseGraphicsCheatsheet.pdf)

## Plots

```{r class.source="watch-out"}
# hist(x=,y=)
# barplot(x=,y=)
# plot(x=,y=)
```

## Plot Specifics

```{r class.source="watch-out"}
# main = 'name of plot' 
# xlab = 'x axis label' 
# ylab = 'yaxis label' 
# pch = 20 -\> change point visual 
# xlim = c(min,max) 
# ylim =c(min,max) 
# col = 'color' 
# col = c('color','color','color',.....)
# horizontal = true -\>rotates boxplot graph 
# margin = 1/2 changes if columns or rows = 1 in prop table
# theme(legend.position="none") removes lengends
```

## Layer additions

```{r class.source="watch-out"}
# birthwt <- read.csv('birthwt.csv')
# plot(birthwt$lwt,birthwt$bwt,main='Mothers Weight and Birthweight',xlab='Mothers Pre-Pregnancy Weight (lbs)',ylab='Birthweight (g)',pch=20)
# abline(h=mean(birthwt$bwt),col='blue',lty=2)
# abline(v=mean(birthwt$lwt),col='darkgreen',lwd=4)
# abline(lm(birthwt$bwt~birthwt$lwt),col='red')
```

## To create a color difference

```{r class.source="watch-out"}
# SmokeYes <- birthwt[birthwt$smoke=='yes',]
# SmokeNo <- birthwt[birthwt$smoke=='no',]
# plot(SmokeYes$lwt,SmokeYes$bwt,main='Mothers Weight and Birthweight',xlab='Mothers Pre-Pregnancy Weight (lbs)',ylab='Birthweight (g)',pch=20,col='orange')
# points(SmokeNo$lwt,SmokeNo$bwt,pch=20,col='blue')
```

## Adding second set of points

```{r class.source="watch-out"}
# plot(birthwt$lwt,birthwt$bwt,main='Mothers Weight and Birthweight',xlab='Mothers Pre-Pregnancy Weight (lbs)',ylab='Birthweight (g)',pch=20)
# text(230,2000,'Write text here')
```

```{r class.source="watch-out"}
# plot(SmokeYes$lwt,SmokeYes$bwt,main='Mothers Weight and Birthweight',xlab='Mothers Pre-Pregnancy Weight (lbs)',ylab='Birthweight (g)',pch=20,col='orange')
# points(SmokeNo$lwt,SmokeNo$bwt,pch=20,col='blue')
# legend('bottomright',c('Smokers','Non-Smokers'),pch=c(20,20),col=c('orange','blue'), inset=.03)
```

***

# [**Basic Tables:**]{style="color:#00FF99;"}

## Base r basic table format

```{r class.source="watch-out"}
#|Header1|Header2|Header3|
#|-------|-------|-------|
#|Cat/Num|Cat/Num|Cat/Num|
#|Cat/Num|Cat/Num|Cat/Num|
#|Cat/Num|Cat/Num|Cat/Num|
#|Cat/Num|Cat/Num|Cat/Num|
```

***

# [**Ggplot2 Essentials:**]{style="color:#00FF99;"}

## Chart separation by variable

```{r class.source="watch-out"}
# plot + facet_grid(ColumnVariable ~ .) #Aligns plots vertically
# plot + facet_wrap(ColumnVariable) #Aligns plots to fill space
```

## Graph Customization addons

```{r class.source="watch-out"}
# +labs(title="",subtitle="",caption="",tag="",x="",y="",fill="legendName") #changes default graph text

# +scale_color_manual(values=Vector_Color) #Useful to color 2 categories in a graph

# +scale_y_continuous(breaks=seq(10,35,by=1) #Customizes major breaks of Y-axis from 1-35 in increments of 1
#                     minor_breaks(10,35,0.5)) #Customizes minor breaks of Y-axis from 1-35 in increments of 0.5
# +scale_x_continuous(breaks=seq(10,35,by=1) #Customizes major breaks of X-axis from 1-35 in increments of 1
#                     minor_breaks(10,35,0.5)) #Customizes minor breaks of X-axis from 1-35 in increments of 0.5

# +geom_text(aes(x=X-coordinate,y=Y-coordinate,label="text"),stat="unique" #Coordinates of text and characters in text
#                ,size=size #Size of text
#                ,color="color") #Color of text
# +geom_text(aes(label=variable)) #Automatically assigns text to where groups in variable are

# +geom_label(aes(x=X-coordinate,y=Y-coordinate,label="text").stat="unique" #Coordinates of text and characters in label
#                ,vjust=2 #vertical adjustment of label (-1) above (+1) below
#                ,size=size #Size of text
#                ,color="color" #Color of text
#                ,fill=""color") #Color of background
# +geom_text(aes(label=variable)) #Automatically assigns labels to where groups in variable are

# +geom_vline(xintercept=0, #adds vertical line at X-intercept (can use vector to add multiple ex -1:1)
#            linetype=2, #type (doted or solid, so on)
#            color=2) #color

# +geom_hline(yintercept=0, #adds horizontal line at Y-intercept (can use vector to add multiple ex -1:1)
#            linetype=2, #type (doted or solid,so on)
#            color=2) #color

# +geom_abline(intercept=0, #Y-intercept of the line
#             slop=1) #line with a slope of 1

# +coord_flip() #Flips axes

# +geom_smooth(formula = y ~ x, method = "lm", se = FALSE, na.rm=TRUE, color="color") adds a line of best fit to the graph (regression line)
```

## Customization using theme

```{r class.source="watch-out"}
# element_blank(),element_rect(),element_text(),(.position),(.ticks),(.title),(.text),(.background) can be used widely for any element

# +theme(plot.title = element_text(family = "serif",               # Font family
#                                   face = "bold",                 # Font face
#                                   color = 4,                     # Font color
#                                   size = 15,                     # Font size
#                                   hjust = 1,                     # Horizontal adjustment
#                                   vjust = 1,                     # Vertical adjustment
#                                   angle = -10,                   # Font angle
#                                   lineheight = 1,                # Line spacing
#                                   margin = margin(20, 0, 0, 0)), # Margins (t, r, b, l)
#
#
#        plot.subtitle = element_text(hjust = 0),    # Subtitle customization
#        plot.caption = element_text(hjust = 0.25),  # Caption customization
#        plot.tag = element_text(face = "italic"),   # Tag customization
#        plot.title.position = "plot",               # Title and subtitle position ("plot" or "panel")
#        plot.caption.position = "panel",            # Caption position ("plot" or "panel")
#        plot.tag.position = "top",                  # Tag position
#
#
#        panel.background = element_rect(fill="color")) #background color of graph
#        panel.border = element_rect(fill="transparent",color=4,size=size) #fill=transparent needed to add the border
#        plot.background = element_rect(fill="color") #Backgroud color of plot
#        plot.background = element_rect(color="color",size=size) #Border of plot
#
#
#        legend.title=element_blank() #Removes title of legend
#        legend.position="none" #Removes legend
#        axis.title.x=element_blank() #Removes x axis label
#        axis.title.y=element_blank() #Removes y axis label
#        axis.text.x=element_blank() #Removes x axis text on ticks
#        axis.text.y=element_blank() #Removes y axis text on ticks
#        axis.ticks.x=element_blank() #Removes x axis ticks
#        axis.ticks.y=element_blank() #Removes y axis ticks
#
#
#        panel.grid=element_line(color="color",size=size,linetype=2) #Grid customization
#        panel.grid.major=element_line(color="color",size=size,linetype=2) #Major grid customization
#        panel.grid.minor=element_line(color="color",size=size,linetype=2) #Minor grid customization
#        panel.grid.major.x=element_line(color="color",size=size,linetype=2) #Customizes vertical lines of grid
#        panel.grid.major.y=element_line(color="color",size=size,linetype=2) #Customizes horizontal lines of grid
#        panel.grid=element_blank() #Removes grid
#        panel.grid.major=element_blank() #Removes major grid
#        panel.grid.minor=element_blank() #Removes minor grid
#
#
#        plot.margin=margin(t=20 #Top margin
#                           ,r=50 #Right margin
#                           ,b=40 #Bottom margin
#                           ,l=10) #Left margin
```

## In-built themes

```{r class.source="watch-out"}
# +theme_grey() #light grey background, white grid, no border
# +theme_bw() #white background, light grey grid, black border
# +theme_linedraw() #white background, black grid, black border
# +theme_light() #white background, light grey grid, light grey border
# +theme_dark() #dark grey background, grey grid, no border
# +theme_minimal() #white background, light grey grid, no border
# +theme_classic() #white background, no grid, black axis lines no border
# +theme_void() #white background, no grid, no axis lines or border
```

## ggthemes

```{r class.source="watch-out"}
# install.packages("ggthemes")
# library("ggthemes")

# +theme_excel() #grey graph background, dark grey horizontal major grid, white plot background and extended black plot border
# +theme_economist() #light blue graph and plot background, white horizontal major grid, extended black plot border
# +theme_fivethirtyeight() #light grey graph and plot background, dark grey major gird, extended black border
# +theme_tufte() #white graph and plot background, no grid, no axis lines or ticks, extended black border
# +theme_gdocs() #white graph and plot background, grey major grid, no y axis line or ticks, bold x axis line without ticks, extended double black border
# +theme_wsj() #light tan graph and plot background, doted horizontal major grid, extended black border
# +theme_calc() #white graph and plot background, solid black horizontal major grid, no x or y axis ticks, extended black border
# +theme_hc() #wite graph and plot background, solid grey major grid, no x or y axis lines, extended black border
```

## Graph Types

```{r class.source="watch-out"}
# Bar Chart
# ggplot(dataset, aes(x=group,y=count,fill=group,color="color",lwd=lineTypeNumeric)) + 
# geom_bar(stat="identity") + 
# scale_fill_manual(values=c("color","Color",...))
# bars ordered in order of count so arrange() or c("","") can be used to force a specific order

# Point Chart
# ggplot(dataset, aes(x=x,y=y),size=size,col=color,alpha=transparencyNumeric) + 
# geom_point() +
# scale_size(name="LegendName",range=c(1:10)) #clamps size of points to a specific range (1:10)

# Jitter Chart
# ggplot(dataset, aes(x=x,y=y),size=size,col=color,alpha=transparencyNumeric) +
# geom_jitter()

# Area Chart
# ggplot(dataset, aes(x=x,y=y)) + 
# geom_area(fill="color",alpha=transparencyNumeric)

# Line chart with multiple lines Chart
# ggplot(dataset, aes(x=x,y=y,color=variable)) + 
# geom_line(linetype=numeric,lwd=lineWidthNumeric,arrow=arrow()) + 
# scale_color_manual(values=colors)

# Step Chart
# ggplot(dataset, aes(x=x,y=y)) + 
# geom_step(direction="vh") #first line horizontal by default (vh=first lien vertical)

# Line Chart
# ggplot(dataset, aes(x=x,y=y)) + 
# geom_line(color=lineColor,lwd=lineWidthNumeric,linetype=lineType(0:6))

# Function Chart
# ggplot() + xlim(c(0,100)) + 
# geom_function(fun=function,color=color,lwd=lineWidth,linetype=lineType(0:6))

# Histogram Chart
# ggplot(dataset, aes(x=x)) + geom_histogram(color=color,fill=color,bins=numBins,binwidth=binwidth,alpha=(0=invisible,0-1)
#                                            ,position="idenity" #allows groups to overlap and no stack
#                                            ,position="dodge") #adds space between each bar
# + stat_bin(binwidth=binwidth, geom="text", aes(label=after_stat(count)), vjust=-1.5) #Adds labels to top of bins

# Boxplot Chart
# ggplot(dataset, aes(x=x,y="" or swap x and y) + geom_boxplot(fill=color #box color
#                                                              ,color=color #border color
#                                                              ,alpha=transparencyNumeric #transparency
#                                                              ,outlier.color=color #outlier color
#                                                              ,linetype=linetype(0:6) #line type
#                                                              ,lwd=lineWidth) #line width
# +geom_jitter(width=amountOfJitter,color=color,shape=shapeNumeric,size=size) #adds in data points #Use outlier.shape=NA within geom_boxplot() because it will add them in again

# Stacked Bar Chart
# ggplot(dataset, aes(x=x,fill=group)) #both x and group being categorical variables with a frequency in the dataset
# +geom_bar()
# ggplot(dataset, aes(x=x,y=y,fill=group)) #y represents frequency
# +geom_bar(stat="identity")

# Pie Chart
# ggplot(dataset, aes(x="",y=value,fill=group))
# +geom_col(color=color) #line color
# +coord_polar(theta="y")
```

***

# [**Rmarkdown:**]{style="color:#00FF99;"}

## File header and formatting

```{r class.source="watch-out"}
# html format
# ---
# title: "Title"
# author: "SubTitle"
# output:
#   html_document: 
#     theme: (theme here) #changes color/font/feel of file
#     toc: yes #table of contents at top
#     toc_float: yes #makes toc float on the side
# ---

# themes 
# cerulean #blue headers, blue icons
# journal #black headers, red icons, article font
# flatly #blueish black headers, blueish black icons
# united #black headers, red icons, book font
# cosmo #light black headers, blue icons
# simplex #black headers, red icons, simple font
# cayman #green headers, blue icons, blue green gradient styling
# lumin #brght with some blue icons
# darkly #dark theme


# pdf format
# ---
# title: "Title"
# author: "SubTitle"
# date: "Sub-subTitle"
# output: pdf_document
# ---
```

## Editing code chunk visual outputs

```{r class.source="watch-out"}
# ```{css, echo=FALSE}
# .watch-out {
#   background-color: grey;
#   border: black;
#   font-size: 15px;
#   font-weight: bold;
#   text-align: left;
#   }
# ```
```

## How Code Chunks Work

```{r class.source="watch-out"}
# ```{r}
# Can run all code in this segment by pressing green arrow
# ```
```

## Code In Line Means

```{r class.source="watch-out"}
# `r mean(shelter$Days.to.Adoption)`
```

## Code chunk supressing

```{r class.source="watch-out"}
# {r, echo=FALSE} Suppresses Code(visual code in report)
# {r, results='hide'} Suppresses code output(visual in report)
# {r, include=FALSE} Suppresses code and output(visual in report)
# {r, message=FALSE} Suppresses messages in report
# {r, warnings=FALSE} Suppresses warnings in report
```

## Rmarkdown file output formatting

```{r class.source="watch-out"}
# \newpage will force the below output onto another page (must be placed outside a code chunk)
```

## Resources

* [R Markdown Cheatsheet](https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf)
* [R Markdown Cookbook](https://bookdown.org/yihui/rmarkdown-cookbook/%20)
* [R Markdown - The Definitive Guide](https://bookdown.org/yihui/rmarkdown/)

## Tabs

```{r class.source="watch-out"}
#  # Tabset {.tabset .tabset-fade .tabset-pills}
#  
#  ## Tab 1
#  
#  text 1
#
#  ## Tab 2
#
#  text 2
#
#  # End
```

# Tabset {.tabset .tabset-fade .tabset-pills}

## Tab 1

text 1

## Tab 2

text 2

#

***

# [**KableExtra Essentials:**]{style="color:#00FF99;"}

## Table preset

```{r class.source="watch-out"}
# kbl(dataset) %>% kable_paper(full_width = T, html_font = "Cambria") %>% kable_styling(bootstrap_options = c("striped","hover","condensed","responsive"))

```

## Tables

```{r class.source="watch-out"}
# kbl(dataset) Most basic table for basic datasets
```

## Can change the theme of the table

```{r class.source="watch-out"}
# +kable_paper()
# +kable_classic()
# +kable_classic_2()
# +kable_minimal()
# +kable_material()
# +kable_material_dark()

# Example of it used) kbl(Top_Ten) %>% kable_paper(full_width = T, html_font = "Cambria")
```

## adding styles to rows and columns

```{r class.source="watch-out"}
# kable_styling(bootstrap_options = c("striped","hover","condensed","responsive")) (used within styling)
# striped = alternating dark rows
# condensed = make a table vertically compact
# responsive = usefull for formatting with small screens 

# ,full_width=FALSE #default is TRUE, #true will take up full width of paper (used within styling)

# ,font_size=(numeric) changes font size in table (used within styling)
# ,htlm_font="Cambria" (used within styling)

# Example of it used) kbl(Top_Ten) %>% kable_paper(full_width = T, html_font = "Cambria") %>% kable_styling(bootstrap_options = c("striped","hover","condensed","responsive"
```

## Specifying Rows and Columns

```{r class.source="watch-out"}
# column_spec(index,(what to do with it)) #Grabs the specific index and changes it or grabs it
# row_spec(index,(what to do with it)) #Grabs the specific index and changes it or grabs it
```

## Table alignment

```{r class.source="watch-out"}
# ,position="left"    ("right" or "center") only matters if table does not have full width (used within styling)
```

***

# [**Tidyvers Functions:**]{style="color:#00FF33;"}

## Combining Datasets

```{r class.source="watch-out"}
# need to find a commonality between datasets first(the key)
# left_join() #keeps only observations in fist dataset
# right_join() #keeps only obeservations in second dataset
# inner_join() #keeps matching values
# full_join() #keeps observations from both datasets
```

## Tibbles better data format

```{r class.source="watch-out"}
# read_csv() #read in data set as a tibble, use (,show_col_types=FALSE) to suppress text.
# as_tibble(dataset) #is the dataset as a tibble
# my_tibble1 <- tibble(x1:5,y=1,z=x+y) #sets my_tibble1 to tibble 
# mytib <- as_tibble(dataset) #setting as a tibble
# mydata <- as.data.frame(mytib) #setting as a data frame
```

## Dplyr manipulating data

```{r class.source="watch-out"}
# filter(dataset, observations, ...|...) #outputs dataset with observations 
# select(dataset, observations) #outputs only the observations mentioned
# arrange(dataset, observaion) #reorders the observation (desc(observation)) for example
# mutate(dataset, newColumn = ) #adds columns to existing data
# used in dataset <- mutate(dataset, newColumn = )
# transmutate(dataset, newColumn = ) #keeps only the new columns
```

***

# [**Date Parsing/Format:**]{style="color:#00FF33;"}

## Date And Time

| Description                   | Code |
|-------------------------------|------|
| Day of the month (decimal \#) | *%d* |
| Month (decimal \#)            | *%m* |
| Month name (abbreviated)      | *%b* |
| Month name (full)             | *%B* |
| Year (2 digit)                | *%y* |
| Year (4 digit)                | *%Y* |
| Hour                          | *h*  |
| Minute                        | *m*  |
| Second                        | *s*  |

## Asks r for the current date and time

```{r class.source="watch-out"}
# Sys.Date()
# Sys.time()
```

## Making a date string into a date

```{r class.source="watch-out"}
# mystring <- c("1990-5-16","1990-6-22")
# mydates1 <- as.Date(mystring)
# as.Date(Monkey_Default$Date.Full, format="%m/%d/%y") #format can be replaced with whatever the string is formatted as
```

## Grabing specifics from a date

```{r class.source="watch-out"}
# month(mydates1)
# day(mydates1)
# year(mydates1)
# hour()
# minute()
# second()
# yday() #day of the year
# wday() #day of the week
```

## Calculating time spans

```{r class.source="watch-out"}
# mydates2 <- as.Date(c("1990/8/17","1991/2/5"))
# mydates2 - mydates1
```

## Need to specify the format

```{r class.source="watch-out"}
# as.Date is a Base R function
# as.Date("1/15/2001")
# as.Date("1/15/2001",format="%m/%d/%Y")
```

## Todays date

```{r class.source="watch-out"}
# date()
# today()
# now()
```

## Can also parse dates this way

```{r class.source="watch-out"}
# ymd("2017-01-31")
# mdy("January 31st, 2017")
# dmy("31-Jan-2017")
# ymd(20170131)
```

***

# [**Using Color:**]{style="color:#33CC00;"}

## Hexadecimal Examples

```{r class.source="watch-out"}
# colored text = <span style="color:color_value;">TEXT</span>
# colored header = # <span style="color:color_value;">**colored_header:**</span>

# Greys
# "grey1"
# "grey10"
# "grey20"
# "grey30"
```

[#FFCC00]{style="color:#FFCC00;"}

[#FF9900]{style="color:#FF9900;"}

[#FF6600]{style="color:#FF6600;"}

[#FF3300]{style="color:#FF3300;"}

[#FF0066]{style="color:#FF0066;"}

[#FF00CC]{style="color:#FF00CC;"}

[#CC33CC]{style="color:#CC33CC;"}

[#CC00FF]{style="color:#CC00FF;"}

[#0033FF]{style="color:#0033FF;"}

[#0066FF]{style="color:#0066FF;"}

[#0099FF]{style="color:#0099FF;"}

[#00CCFF]{style="color:#00CCFF;"}

[#00FF99]{style="color:#00FF99;"}

[#00FF33]{style="color:#00FF33;"}

[#33CC00]{style="color:#33CC00;"}

[#66FF00]{style="color:#66FF00;"}

[#000000]{style="color:#000000;"}

[#999999]{style="color:#999999;"}

## library("RColorBrewer")

```{r class.source="watch-out"}
library("RColorBrewer")

# useful for graphing
# outside aes() do ,fill=brewer.pal(n=number_categories, name= 'gradient_name')

display.brewer.pal(n=9, name= 'YlOrRd')
display.brewer.pal(n=9, name= 'YlOrBr')
display.brewer.pal(n=9, name= 'YlGnBu')
display.brewer.pal(n=9, name= 'YlGn')
display.brewer.pal(n=9, name= 'Reds')
display.brewer.pal(n=9, name= 'RdPu')
display.brewer.pal(n=9, name= 'Purples')
display.brewer.pal(n=9, name= 'PuRd')
display.brewer.pal(n=9, name= 'PuBuGn')
display.brewer.pal(n=9, name= 'PuBu')
display.brewer.pal(n=9, name= 'OrRd')
display.brewer.pal(n=9, name= 'Oranges')
display.brewer.pal(n=9, name= 'Greys')
display.brewer.pal(n=9, name= 'Greens')
display.brewer.pal(n=9, name= 'GnBu')
display.brewer.pal(n=9, name= 'BuPu')
display.brewer.pal(n=9, name= 'BuGn')
display.brewer.pal(n=9, name= 'Blues')

display.brewer.pal(n=11, name= 'Spectral')
display.brewer.pal(n=11, name= 'RdYlGn')
display.brewer.pal(n=11, name= 'RdYlBu')
display.brewer.pal(n=11, name= 'RdGy')
display.brewer.pal(n=11, name= 'RdBu')
display.brewer.pal(n=11, name= 'PuOr')
display.brewer.pal(n=11, name= 'PRGn')
display.brewer.pal(n=11, name= 'PiYG')
display.brewer.pal(n=11, name= 'BrBG')
```

***